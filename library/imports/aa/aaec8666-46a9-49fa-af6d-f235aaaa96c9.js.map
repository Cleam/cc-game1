{"version":3,"sources":["assets/scripts/Game.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAE5E,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAkC,wBAAY;IAA9C;QAAA,qEAkEC;QAjEC,gBAAgB;QAIhB,gBAAU,GAAG,IAAI,CAAC;QAElB,mBAAmB;QAEnB,qBAAe,GAAG,CAAC,CAAC;QAEpB,qBAAe,GAAG,CAAC,CAAC;QAEpB,qBAAqB;QAKrB,YAAM,GAAG,IAAI,CAAC;QAEd,oCAAoC;QAKpC,YAAM,GAAG,IAAI,CAAC;QAEd,aAAO,GAAG,CAAC,CAAC;;IAuCd,CAAC;IArCC,wBAAwB;IAExB,qBAAM,GAAN;QACE,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QAC7C,aAAa;QACb,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;QACtD,WAAW;QACX,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;IAED,aAAa;IAEb,iBAAiB;IAEjB,2BAAY,GAAZ;QACE,qBAAqB;QACrB,IAAM,OAAO,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAChD,sBAAsB;QACtB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC;QAC5B,cAAc;QACd,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC;IACjD,CAAC;IAED,iCAAkB,GAAlB;QACE,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,6BAA6B;QAC7B,IAAM,KAAK,GACT,IAAI,CAAC,OAAO;YACZ,IAAI,CAAC,MAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,UAAU;YAC7D,EAAE,CAAC;QACL,sBAAsB;QACtB,IAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACjC,KAAK,GAAG,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;QAEzC,SAAS;QACT,OAAO,EAAE,CAAC,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;IAC7B,CAAC;IA5DD;QAHC,QAAQ,CAAC;YACR,IAAI,EAAE,EAAE,CAAC,MAAM;SAChB,CAAC;4CACgB;IAIlB;QADC,QAAQ,EAAE;iDACS;IAEpB;QADC,QAAQ;iDACW;IAOpB;QAJC,QAAQ,CAAC;YACR,IAAI,EAAE,EAAE,CAAC,IAAI;YACb,WAAW,EAAE,MAAM;SACpB,CAAC;wCACY;IAOd;QAJC,QAAQ,CAAC;YACR,IAAI,EAAE,EAAE,CAAC,IAAI;YACb,WAAW,EAAE,UAAU;SACxB,CAAC;wCACY;IAzBK,IAAI;QADxB,OAAO;OACa,IAAI,CAkExB;IAAD,WAAC;CAlED,AAkEC,CAlEiC,EAAE,CAAC,SAAS,GAkE7C;kBAlEoB,IAAI","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Game extends cc.Component {\n  // 这个属性引用了星星预制资源\n  @property({\n    type: cc.Prefab,\n  })\n  starPrefab = null;\n\n  //   星星产生后消失时间的随机范围\n  @property()\n  maxStarDuration = 0;\n  @property\n  minStarDuration = 0;\n\n  //   地面节点，用于确定星星生成的高度\n  @property({\n    type: cc.Node,\n    displayName: \"地面节点\",\n  })\n  ground = null;\n\n  //   Player节点，用于获取主角弹跳的高度，和控制主角行动的开关\n  @property({\n    type: cc.Node,\n    displayName: \"Player节点\",\n  })\n  player = null;\n\n  groundY = 0;\n\n  // LIFE-CYCLE CALLBACKS:\n\n  onLoad() {\n    console.log(\"this.ground :>> \", this.ground);\n    // 获取地平面的y轴坐标\n    this.groundY = this.ground.y + this.ground.height / 2;\n    // 生成一个新的星星\n    this.spawnNewStar();\n  }\n\n  // start() {}\n\n  // update (dt) {}\n\n  spawnNewStar() {\n    // 使用给定的模板在场景中生成一个新节点\n    const newStar = cc.instantiate(this.starPrefab);\n    // 将新增的节点添加到Canvas节点下面\n    this.node.addChild(newStar);\n    // 为星星设置一个随机位置\n    newStar.setPosition(this.getNewStarPosition());\n  }\n\n  getNewStarPosition() {\n    let randX = 0;\n    // 根据地平面位置和主角跳跃高度随机得到一个星星的y坐标\n    const randY =\n      this.groundY +\n      Math.random() * this.player.getComponent(\"Player\").jumpHeight +\n      50;\n    // 根据屏幕宽度，随机得到一个星星的x坐标\n    const maxX = this.node.width / 2;\n    randX = (Math.random() - 0.5) * 2 * maxX;\n\n    // 返回星星坐标\n    return cc.v2(randX, randY);\n  }\n}\n"]}